-- ANTI FLING PROTECT

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer

local function setupAntiFling(character)
    local humanoid = character:WaitForChild("Humanoid")
    local root = character:WaitForChild("HumanoidRootPart")

    -- Giữ thăng bằng
    humanoid:SetStateEnabled(Enum.HumanoidStateType.FallingDown, false)
    humanoid:SetStateEnabled(Enum.HumanoidStateType.Ragdoll, false)

    -- Giảm tác động lực fling
    root.CustomPhysicalProperties = PhysicalProperties.new(
        0.7, -- Density
        0.3, -- Friction
        0.5, -- Elasticity
        1,
        1
    )

    -- Theo dõi vận tốc bất thường
    RunService.Heartbeat:Connect(function()
        if root and root.Parent then
            if root.AssemblyLinearVelocity.Magnitude > 150 then
                root.AssemblyLinearVelocity = Vector3.zero
                root.AssemblyAngularVelocity = Vector3.zero
            end
        end
    end)
end

-- Khi spawn
if LocalPlayer.Character then
    setupAntiFling(LocalPlayer.Character)
end

LocalPlayer.CharacterAdded:Connect(function(char)
    setupAntiFling(char)
end)

print("Anti Fling Enabled ✅")