-- üìå SHIFT LOCK CH·ªà XOAY TR√ÅI PH·∫¢I + LU√îN NH√åN PH√çA TR∆Ø·ªöC
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local camera = workspace.CurrentCamera
local shiftLocked = false
local crosshair = nil

-- T·∫°o t√¢m ng·∫Øm
local function createCrosshair()
    local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
    gui.Name = "ShiftLockCrosshair"

    local frame = Instance.new("Frame", gui)
    frame.Size = UDim2.new(0, 6, 0, 6)
    frame.Position = UDim2.new(0.5, -3, 0.5, -3)
    frame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    frame.BorderSizePixel = 0
    frame.Visible = false
    crosshair = frame
end

-- G·∫Øn camera nh√¨n ph√≠a tr∆∞·ªõc
local function lockCamera()
    if not player.Character or not player.Character:FindFirstChild("Humanoid") then return end
    local humanoid = player.Character:FindFirstChild("Humanoid")
    humanoid.AutoRotate = false

    RunService.RenderStepped:Connect(function()
        if shiftLocked and player.Character:FindFirstChild("HumanoidRootPart") then
            local hrp = player.Character.HumanoidRootPart
            local camCF = camera.CFrame
            -- Gi·ªØ h∆∞·ªõng nh√¢n v·∫≠t theo tr·ª•c Y c·ªßa camera (tr√°i - ph·∫£i)
            hrp.CFrame = CFrame.new(hrp.Position, hrp.Position + Vector3.new(camCF.LookVector.X, 0, camCF.LookVector.Z))
        end
    end)
end

-- B·∫≠t / t·∫Øt Shift Lock
local function toggleShiftLock()
    shiftLocked = not shiftLocked
    if shiftLocked then
        if crosshair then crosshair.Visible = true end
        player.CameraMode = Enum.CameraMode.LockFirstPerson
    else
        if crosshair then crosshair.Visible = false end
        player.CameraMode = Enum.CameraMode.Classic
        if player.Character and player.Character:FindFirstChild("Humanoid") then
            player.Character.Humanoid.AutoRotate = true
        end
    end
end

-- Kh·ªüi t·∫°o
createCrosshair()
lockCamera()

-- B·∫≠t / t·∫Øt b·∫±ng ph√≠m Shift
UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.LeftShift then
        toggleShiftLock()
    end
end)
